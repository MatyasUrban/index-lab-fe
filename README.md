## Running the Project

**Prerequisites:**

- Download and install Docker Desktop:
  - [macOS](https://docs.docker.com/desktop/setup/install/mac-install/)
  - [Windows](https://docs.docker.com/desktop/setup/install/windows-install/)
  - [Linux](https://docs.docker.com/desktop/setup/install/linux/)
- Open Docker Desktop after installation.
- Open Terminal (Linux/MacOS) or Command Promp / PowerShell (Windows)

**1. Using the Latest Repository Version: [Reccomended]**

- Download this repository to your machine:
  - **If you have Git installed:**
    ```bash
    git clone https://github.com/MatyasUrban/index-lab.git
    ```
    or
    ```bash
    git clone git@github.com:MatyasUrban/index-lab.git
    ```
  - **If you don't have Git installed:**
    - Go to: `Code > Local > Download ZIP` on the GitHub repository page.
    - Unzip the downloaded archive.
- Navigate to the downloaded repository's directory in your terminal.
- Run the following command:

  ```bash
  docker compose up
  ```

  The process can take up to 5 minutes and will build images and instantiate containers per instructions in `docker-compose.yaml` (`Dockerfile.app` and `Dockerfile.db`).

- Open your web browser and visit: `localhost:3000`

**2. Using Prebuilt Images (from Docker Hub):**

- Download the `docker-compose.yaml` file from this repository's directory.
- Navigate to the directory where you saved `docker-compose.yaml` in your terminal.
- Run the following command:

  ```bash
  docker compose up
  ```

- Wait for the images to download and containers to be created
- Open your web browser and visit: `localhost:3000`

## Dataset

The `1_init_schema.sql` and `2_init_data.sql` scripts initialize the PostgreSQL container defined in `docker-compose.yaml` based on the official `postgres:17` image.

### Attribution and Context

The original data was created by Fusheng Wang and Carlo Zaniolo at Siemens Corporate Research in XML format. (http://timecenter.cs.aau.dk/software.htm)

Giuseppe Maxia created the relational schema and Patrick Crews exported the data to MySQL format. (https://github.com/datacharmer/test_db)

I utilized the PostgreSQL port available at https://github.com/h8/employees-database.

### Changes Made

I created simplified scripts `1_init_schema.sql` and `2_init_data.sql` with these schema changes:

1. Changed all `bigint` columns to `int` after verifying value ranges
2. Changed department table's `id` column from `char(4)` to `int`, safely replacing all instances of `d00x` with just `x` after confirming only departments `d001-d009` exist
3. Added `X` to the employee_gender enum (`M`, `F`, `X`) for inclusivity

Instead of using PG dump format, I created simplified initialization files by:

1. Setting up schema, search path, and tables with constraints (primary key, `GENERATED BY DEFAULT AS IDENTITY`, foreign key references) directly in table definitions, eliminating separate create sequence, index, and alter table commands
2. Ordering the `1_init_schema.sql` script to create entities without foreign key references first:

- Starting with employee_gender enum
- Followed by employee table
- Then department table
- All other tables follow, as they reference these two tables

3. Moving employee data copy to the beginning to maintain data integrity from the start, avoiding initialization failures and eliminating the need to set sequence numbers after data copy

This approach avoids complex PG dumps while creating a simple script conforming to modern PostgreSQL with strong data integrity and built-in verification of dataset integrity.

### Disclaimer

Per my understanding, the data is fabricated. Any resemblance to real employees is coincidental.

### License

This work is licensed under the Creative Commons Attribution-Share Alike 3.0 Unported License. To view a copy of this license, visit http://creativecommons.org/licenses/by-sa/3.0/ or send a letter to Creative Commons, 171 Second Street, Suite 300, San Francisco, California, 94105, USA.
